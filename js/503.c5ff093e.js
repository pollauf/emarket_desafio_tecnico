"use strict";(globalThis["webpackChunkemarket"]=globalThis["webpackChunkemarket"]||[]).push([[503],{649:(t,e,a)=>{a.d(e,{Z:()=>W});var l=a(9835),o=a(6970);const i={class:"q-pr-sm"};function s(t,e,a,s,r,n){const d=(0,l.up)("q-th"),c=(0,l.up)("q-tr"),u=(0,l.up)("q-icon"),m=(0,l.up)("q-item-section"),p=(0,l.up)("q-item-label"),g=(0,l.up)("q-item"),w=(0,l.up)("q-list"),f=(0,l.up)("q-btn-dropdown"),h=(0,l.up)("q-btn"),b=(0,l.up)("q-td"),_=(0,l.up)("q-input"),v=(0,l.up)("q-table"),q=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(v,{title:t.title,rows:t.rows,columns:t.columns,filter:t.filter,"rows-per-page-options":t.rowsPerPage,"row-key":t.rowKey,style:(0,o.j5)(t.height>0?`height: ${t.height}px`:"")},(0,l.Nv)({_:2},[t.actions.length>0?{name:"header",fn:(0,l.w5)((t=>[(0,l.Wm)(c,{props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{"auto-width":""}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.cols,(e=>((0,l.wg)(),(0,l.j4)(d,{key:e.name,props:t},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])]))}:void 0,t.actions.length>0?{name:"body",fn:(0,l.w5)((e=>[(0,l.Wm)(c,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{"auto-width":""},{default:(0,l.w5)((()=>[t.actions.length>1?((0,l.wg)(),(0,l.j4)(f,{key:0,size:"sm",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.actions,((t,a)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(g,{key:a,clickable:"",onClick:a=>t.action(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{color:"primary",name:t.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[q]]))),128))])),_:2},1024)])),_:2},1024)):((0,l.wg)(),(0,l.j4)(h,{key:1,dense:"",class:(0,o.C_)(t.actions[0].class),onClick:a=>t.actions[0].action(e.row),flat:"","icon-right":t.actions[0].icon,size:"md"},{default:(0,l.w5)((()=>[(0,l._)("span",i,(0,o.zw)(t.actions[0].label),1)])),_:2},1032,["class","onClick","icon-right"]))])),_:2},1024),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cols,(t=>((0,l.wg)(),(0,l.j4)(b,{key:t.name,props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.value),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])]))}:void 0,t.showFilter?{name:"top-right",fn:(0,l.w5)((()=>[(0,l.Wm)(_,{borderless:"",dense:"",debounce:"300",modelValue:t.filter,"onUpdate:modelValue":e[0]||(e[0]=e=>t.filter=e),placeholder:"Pesquisar"},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])]))}:void 0]),1032,["title","rows","columns","filter","rows-per-page-options","row-key","style"])}var r=a(499);const n=(0,l.aZ)({name:"DataTable",props:{title:{type:String,required:!0},rows:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},actions:{type:Array,default:()=>[]},rowsPerPage:{type:Array,default:()=>[5,10,25,50,100]},height:{type:Number,default:0},showFilter:{type:Boolean,default:!0}},setup(){const t=(0,r.iH)("");return{filter:t}}});var d=a(1639),c=a(1746),u=a(9546),m=a(1682),p=a(7220),g=a(8479),w=a(3246),f=a(490),h=a(1233),b=a(2857),_=a(3115),v=a(8879),q=a(6611),y=a(2146),k=a(9984),Z=a.n(k);const x=(0,d.Z)(n,[["render",s]]),W=x;Z()(n,"components",{QTable:c.Z,QTr:u.Z,QTh:m.Z,QTd:p.Z,QBtnDropdown:g.Z,QList:w.Z,QItem:f.Z,QItemSection:h.Z,QIcon:b.Z,QItemLabel:_.Z,QBtn:v.Z,QInput:q.Z}),Z()(n,"directives",{ClosePopup:y.Z})},9335:(t,e,a)=>{a.d(e,{Z:()=>Z});var l=a(9835),o=a(6970);const i={class:"text-h6"},s=(0,l._)("div",{class:"offset-md-2"},null,-1),r=(0,l._)("span",{class:"q-pl-sm"}," Voltar ",-1),n=(0,l._)("span",{class:"q-pr-sm"}," Salvar ",-1),d=(0,l._)("div",{class:"offset-md-2"},null,-1);function c(t,e,a,c,u,m){const p=(0,l.up)("q-space"),g=(0,l.up)("q-btn"),w=(0,l.up)("q-bar"),f=(0,l.up)("q-form"),h=(0,l.up)("q-card-section"),b=(0,l.up)("q-card-actions"),_=(0,l.up)("q-card"),v=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(v,{modelValue:t.dialogOpened,"onUpdate:modelValue":e[0]||(e[0]=e=>t.dialogOpened=e),maximized:!0,persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"bg-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"bg-primary text-white q-pa-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",i,(0,o.zw)(t.title),1),(0,l.Wm)(p),(0,l.Wm)(g,{onClick:t.cancelButton,dense:"",flat:"",icon:"close",size:"md",disable:t.loading},null,8,["onClick","disable"])])),_:1}),(0,l.Wm)(h,{class:"q-pt-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{onSubmit:t.submitForm,ref:"form",class:"row"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:"col-12 col-sm-8 offset-sm-2 q-pa-sm q-pt-lg q-pb-lg",style:(0,o.j5)(`background-color: ${t.background}`)},[(0,l.WI)(t.$slots,"default")],4)])),_:3},8,["onSubmit"])])),_:3}),(0,l.Wm)(b,{style:{"border-top":"1px solid lightgray"},align:"right",class:"bg-white text-teal q-pa-md q-mb-sm q-mt-md"},{default:(0,l.w5)((()=>[s,(0,l.Wm)(g,{class:"text-black",style:{"background-color":"#cfcfcf"},onClick:t.cancelButton,flat:"",icon:"arrow_back_ios",size:"md",disable:t.loading},{default:(0,l.w5)((()=>[r])),_:1},8,["onClick","disable"]),(0,l.Wm)(p),t.showSaveButton?((0,l.wg)(),(0,l.j4)(g,{key:0,class:"bg-positive text-white",onClick:t.saveButton,flat:"","icon-right":"save",size:"md",disable:t.loading,loading:t.loading},{default:(0,l.w5)((()=>[n])),_:1},8,["onClick","disable","loading"])):(0,l.kq)("",!0),d])),_:1})])),_:3})])),_:3},8,["modelValue"])}const u=(0,l.aZ)({name:"FormDialog",data(){return{dialogOpened:this.dialog,loading:!1}},methods:{async submitForm(){this.loading=!0;let t=await this.save();1==t&&this.closeModal(),this.loading=!1},saveButton(){this.$refs.form.submit()},cancelButton(){this.cancel(),this.closeModal()},closeModal(){this.loading=!1,this.$emit("update:dialog",!1)}},watch:{dialog(t){this.dialogOpened=t}},props:{title:{type:String,default:""},dialog:{type:Boolean,default:!1},save:{type:Function,default:()=>{}},cancel:{type:Function,default:()=>{}},showSaveButton:{type:Boolean,default:!0},background:{type:String,default:"#ededed"}}});var m=a(1639),p=a(2074),g=a(4458),w=a(4526),f=a(136),h=a(8879),b=a(3190),_=a(8326),v=a(1821),q=a(9984),y=a.n(q);const k=(0,m.Z)(u,[["render",c]]),Z=k;y()(u,"components",{QDialog:p.Z,QCard:g.Z,QBar:w.Z,QSpace:f.Z,QBtn:h.Z,QCardSection:b.Z,QForm:_.Z,QCardActions:v.Z})},1503:(t,e,a)=>{a.r(e),a.d(e,{default:()=>P});var l=a(9835),o=a(6970);const i={class:"q-pa-md"},s={class:"row q-mt-md"},r={class:"col-12 col-md-12"},n={class:"row"},d={class:"col-12 col-md-10 offset-md-1"},c={class:"col-6 text-left"},u={class:"text-h6"},m={class:"col-6 text-right"},p={class:"text-h6"},g={class:"row q-mt-sm"},w={class:"col-12 col-md-10 offset-md-1"},f={class:"row q-mt-sm"},h={class:"col-12 col-md-10 offset-md-1"},b=(0,l._)("div",{class:"col-12 col-md-8"},[(0,l._)("div",{class:"text-h6"},"SUBTOTAL")],-1),_={class:"col-12 col-md-4 text-right"},v={class:"text-h6 text-bold",style:{"text-transform":"uppercase"}},q={class:"text-subtitle2",style:{color:"whitesmoke","margin-top":"10px"}};function y(t,e,a,y,k,Z){const x=(0,l.up)("DataTable"),W=(0,l.up)("q-page"),F=(0,l.up)("q-card-section"),Q=(0,l.up)("q-card"),S=(0,l.up)("FormDialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",s,[(0,l._)("div",r,[(0,l.Wm)(x,{title:"Relatório de Vendas",columns:t.columns,rows:t.rows,actions:t.actions},null,8,["columns","rows","actions"])])])])])),_:1}),(0,l.Wm)(S,{title:"Relatório de Venda",background:"white",showSaveButton:!1,dialog:t.dialog,"onUpdate:dialog":e[0]||(e[0]=e=>t.dialog=e)},{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l._)("div",d,[(0,l.Wm)(Q,{class:"my-card full-width non-selectable"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{class:"row bg-secondary text-white",style:{"min-height":"50px"}},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",u,"Código "+(0,o.zw)(t.sale.id),1)]),(0,l._)("div",m,[(0,l._)("div",p,(0,o.zw)(t.formatDate(t.sale.date)),1)])])),_:1})])),_:1})])]),(0,l._)("div",g,[(0,l._)("div",w,[(0,l.Wm)(x,{title:"",columns:t.columnsSale,rows:t.products,"row-key":"name",rowsPerPage:[0],virtualScroll:!0,height:300,filter:null,"filter-method":null,showFilter:!1,"hide-no-data":"","hide-pagination":"","hide-bottom":"","virtual-scroll":""},null,8,["columns","rows"])])]),(0,l._)("div",f,[(0,l._)("div",h,[(0,l.Wm)(Q,{class:"my-card full-width non-selectable"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{class:"row bg-secondary text-white",style:{"min-height":"100px"}},{default:(0,l.w5)((()=>[b,(0,l._)("div",_,[(0,l._)("div",v," R$ "+(0,o.zw)(parseFloat(t.sale.total_price).toLocaleString("pt-br",{minimumFractionDigits:2})),1),(0,l._)("div",q," Impostos: R$ "+(0,o.zw)(parseFloat(t.sale.total_tax).toLocaleString("pt-br",{minimumFractionDigits:2})),1)])])),_:1})])),_:1})])])])),_:1},8,["dialog"])],64)}var k=a(649),Z=a(9335),x=a(1569);const W=t=>{let e=t.split(" "),a=e[0].split("-"),l=e[1],o=`${a[2]}/${a[1]}/${a[0]} ${l}`;return o},F=(0,l.aZ)({name:"SaleReportPage",data(){return{rows:[],actions:[{label:"",icon:"menu",class:"bg-positive text-white",action:async t=>{this.sale=t,await this.loadProducts(this.sale.id),this.dialog=!0}}],dialog:!1,sale:null,products:[]}},created(){this.loadData()},methods:{loadData(){x.api.get("/sale/list").then((t=>{this.rows=t.data.data}))},async loadProducts(t){let e=await x.api.get(`/sale/product/list/${t}`);this.products=e.data.data},formatDate:W},setup(){const t=[{name:"id",required:!0,label:"Cód.",align:"center",field:t=>t.id,format:t=>`${t}`,sortable:!0},{name:"total_price",required:!0,label:"Total",align:"right",field:t=>t.total_price,format:t=>{var e=parseFloat(t);return isNaN(e)?"-":`R$ ${e.toLocaleString("pt-br",{minimumFractionDigits:2})}`},sortable:!0},{name:"total_tax",required:!0,label:"Imposto",align:"right",field:t=>t.total_tax,format:t=>{var e=parseFloat(t);return isNaN(e)?"-":`R$ ${e.toLocaleString("pt-br",{minimumFractionDigits:2})}`},sortable:!0},{name:"date",required:!0,label:"Data",align:"right",field:t=>t.date,format:t=>W(t),sortable:!0}],e=[{name:"name",required:!0,sortable:!1,label:"Nome",align:"left",field:t=>t.name,format:t=>`${t}`},{name:"reference",required:!0,sortable:!1,label:"Referência",align:"left",field:t=>t.reference,format:t=>`${t}`},{name:"unit_price",required:!0,sortable:!1,label:"Preço",align:"right",field:t=>t.unit_price,format:t=>{var e=parseFloat(t);return isNaN(e)?"-":`R$ ${e.toLocaleString("pt-br",{minimumFractionDigits:2})}`}},{name:"quantity",required:!0,sortable:!1,label:"Quantidade",align:"right",field:t=>t.quantity,format:t=>`${t}`},{name:"total_price",required:!0,sortable:!1,label:"Total",align:"right",field:t=>t.total_price,format:t=>{var e=parseFloat(t);return isNaN(e)?"-":`R$ ${e.toLocaleString("pt-br",{minimumFractionDigits:2})}`}},{name:"total_tax",required:!0,sortable:!1,label:"Impostos",align:"right",field:t=>t.total_tax,format:t=>{var e=parseFloat(t);return isNaN(e)?"-":`R$ ${e.toLocaleString("pt-br",{minimumFractionDigits:2})}`}}];return{columns:t,columnsSale:e}},components:{DataTable:k.Z,FormDialog:Z.Z}});var Q=a(1639),S=a(9885),$=a(4458),D=a(3190),C=a(8149),B=a(9984),z=a.n(B);const N=(0,Q.Z)(F,[["render",y]]),P=N;z()(F,"components",{QPage:S.Z,QCard:$.Z,QCardSection:D.Z,QField:C.Z})}}]);