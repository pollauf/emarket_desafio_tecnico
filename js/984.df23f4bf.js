"use strict";(globalThis["webpackChunkemarket"]=globalThis["webpackChunkemarket"]||[]).push([[984],{649:(e,t,a)=>{a.d(t,{Z:()=>Q});var l=a(9835),o=a(6970);const i={class:"q-pr-sm"};function s(e,t,a,s,n,r){const d=(0,l.up)("q-th"),c=(0,l.up)("q-tr"),m=(0,l.up)("q-icon"),u=(0,l.up)("q-item-section"),p=(0,l.up)("q-item-label"),g=(0,l.up)("q-item"),f=(0,l.up)("q-list"),w=(0,l.up)("q-btn-dropdown"),h=(0,l.up)("q-btn"),b=(0,l.up)("q-td"),_=(0,l.up)("q-input"),q=(0,l.up)("q-table"),y=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(q,{title:e.title,rows:e.rows,columns:e.columns,filter:e.filter,"rows-per-page-options":e.rowsPerPage,"row-key":e.rowKey,style:(0,o.j5)(e.height>0?`height: ${e.height}px`:"")},(0,l.Nv)({_:2},[e.actions.length>0?{name:"header",fn:(0,l.w5)((e=>[(0,l.Wm)(c,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{"auto-width":""}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cols,(t=>((0,l.wg)(),(0,l.j4)(d,{key:t.name,props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])]))}:void 0,e.actions.length>0?{name:"body",fn:(0,l.w5)((t=>[(0,l.Wm)(c,{props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{"auto-width":""},{default:(0,l.w5)((()=>[e.actions.length>1?((0,l.wg)(),(0,l.j4)(w,{key:0,size:"sm",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.actions,((e,a)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(g,{key:a,clickable:"",onClick:a=>e.action(t.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"primary",name:e.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[y]]))),128))])),_:2},1024)])),_:2},1024)):((0,l.wg)(),(0,l.j4)(h,{key:1,dense:"",class:(0,o.C_)(e.actions[0].class),onClick:a=>e.actions[0].action(t.row),flat:"","icon-right":e.actions[0].icon,size:"md"},{default:(0,l.w5)((()=>[(0,l._)("span",i,(0,o.zw)(e.actions[0].label),1)])),_:2},1032,["class","onClick","icon-right"]))])),_:2},1024),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.cols,(e=>((0,l.wg)(),(0,l.j4)(b,{key:e.name,props:t},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.value),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])]))}:void 0,e.showFilter?{name:"top-right",fn:(0,l.w5)((()=>[(0,l.Wm)(_,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),placeholder:"Pesquisar"},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"search"})])),_:1},8,["modelValue"])]))}:void 0]),1032,["title","rows","columns","filter","rows-per-page-options","row-key","style"])}var n=a(499);const r=(0,l.aZ)({name:"DataTable",props:{title:{type:String,required:!0},rows:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},actions:{type:Array,default:()=>[]},rowsPerPage:{type:Array,default:()=>[5,10,25,50,100]},height:{type:Number,default:0},showFilter:{type:Boolean,default:!0}},setup(){const e=(0,n.iH)("");return{filter:e}}});var d=a(1639),c=a(1746),m=a(9546),u=a(1682),p=a(7220),g=a(8479),f=a(3246),w=a(490),h=a(1233),b=a(2857),_=a(3115),q=a(8879),y=a(6611),v=a(2146),k=a(9984),Z=a.n(k);const W=(0,d.Z)(r,[["render",s]]),Q=W;Z()(r,"components",{QTable:c.Z,QTr:m.Z,QTh:u.Z,QTd:p.Z,QBtnDropdown:g.Z,QList:f.Z,QItem:w.Z,QItemSection:h.Z,QIcon:b.Z,QItemLabel:_.Z,QBtn:q.Z,QInput:y.Z}),Z()(r,"directives",{ClosePopup:v.Z})},9335:(e,t,a)=>{a.d(t,{Z:()=>Z});var l=a(9835),o=a(6970);const i={class:"text-h6"},s=(0,l._)("div",{class:"offset-md-2"},null,-1),n=(0,l._)("span",{class:"q-pl-sm"}," Voltar ",-1),r=(0,l._)("span",{class:"q-pr-sm"}," Salvar ",-1),d=(0,l._)("div",{class:"offset-md-2"},null,-1);function c(e,t,a,c,m,u){const p=(0,l.up)("q-space"),g=(0,l.up)("q-btn"),f=(0,l.up)("q-bar"),w=(0,l.up)("q-form"),h=(0,l.up)("q-card-section"),b=(0,l.up)("q-card-actions"),_=(0,l.up)("q-card"),q=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(q,{modelValue:e.dialogOpened,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dialogOpened=t),maximized:!0,persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"bg-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"bg-primary text-white q-pa-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",i,(0,o.zw)(e.title),1),(0,l.Wm)(p),(0,l.Wm)(g,{onClick:e.cancelButton,dense:"",flat:"",icon:"close",size:"md",disable:e.loading},null,8,["onClick","disable"])])),_:1}),(0,l.Wm)(h,{class:"q-pt-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{onSubmit:e.submitForm,ref:"form",class:"row"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:"col-12 col-sm-8 offset-sm-2 q-pa-sm q-pt-lg q-pb-lg",style:(0,o.j5)(`background-color: ${e.background}`)},[(0,l.WI)(e.$slots,"default")],4)])),_:3},8,["onSubmit"])])),_:3}),(0,l.Wm)(b,{style:{"border-top":"1px solid lightgray"},align:"right",class:"bg-white text-teal q-pa-md q-mb-sm q-mt-md"},{default:(0,l.w5)((()=>[s,(0,l.Wm)(g,{class:"text-black",style:{"background-color":"#cfcfcf"},onClick:e.cancelButton,flat:"",icon:"arrow_back_ios",size:"md",disable:e.loading},{default:(0,l.w5)((()=>[n])),_:1},8,["onClick","disable"]),(0,l.Wm)(p),e.showSaveButton?((0,l.wg)(),(0,l.j4)(g,{key:0,class:"bg-positive text-white",onClick:e.saveButton,flat:"","icon-right":"save",size:"md",disable:e.loading,loading:e.loading},{default:(0,l.w5)((()=>[r])),_:1},8,["onClick","disable","loading"])):(0,l.kq)("",!0),d])),_:1})])),_:3})])),_:3},8,["modelValue"])}const m=(0,l.aZ)({name:"FormDialog",data(){return{dialogOpened:this.dialog,loading:!1}},methods:{async submitForm(){this.loading=!0;let e=await this.save();1==e&&this.closeModal(),this.loading=!1},saveButton(){this.$refs.form.submit()},cancelButton(){this.cancel(),this.closeModal()},closeModal(){this.loading=!1,this.$emit("update:dialog",!1)}},watch:{dialog(e){this.dialogOpened=e}},props:{title:{type:String,default:""},dialog:{type:Boolean,default:!1},save:{type:Function,default:()=>{}},cancel:{type:Function,default:()=>{}},showSaveButton:{type:Boolean,default:!0},background:{type:String,default:"#ededed"}}});var u=a(1639),p=a(2074),g=a(4458),f=a(4526),w=a(136),h=a(8879),b=a(3190),_=a(8326),q=a(1821),y=a(9984),v=a.n(y);const k=(0,u.Z)(m,[["render",c]]),Z=k;v()(m,"components",{QDialog:p.Z,QCard:g.Z,QBar:f.Z,QSpace:w.Z,QBtn:h.Z,QCardSection:b.Z,QForm:_.Z,QCardActions:q.Z})},8984:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var l=a(9835);const o={class:"q-pa-md"},i={class:"row q-mt-md"},s={class:"col-12 col-md-12 text-right"},n=(0,l._)("span",{class:"q-pl-sm"}," Cadastro ",-1),r={class:"row q-mt-md"},d={class:"col-12 col-md-12"},c={class:"row"},m={class:"col-12 col-md-8 q-pa-sm"},u={class:"col-12 col-md-4 q-pa-sm"},p={class:"row"},g={class:"col-12 col-md-4 q-pa-sm"},f={class:"col-12 col-md-4 q-pa-sm"},w={class:"col-12 col-md-4 q-pa-sm"};function h(e,t,a,h,b,_){const q=(0,l.up)("q-btn"),y=(0,l.up)("DataTable"),v=(0,l.up)("q-page"),k=(0,l.up)("q-input"),Z=(0,l.up)("q-select"),W=(0,l.up)("FormDialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",i,[(0,l._)("div",s,[(0,l.Wm)(q,{onClick:t[0]||(t[0]=()=>this.dialog=!0),class:"bg-positive text-white",flat:"",icon:"add",size:"md"},{default:(0,l.w5)((()=>[n])),_:1})])]),(0,l._)("div",r,[(0,l._)("div",d,[(0,l.Wm)(y,{title:"Produtos",columns:e.columns,rows:e.rows,actions:e.actions},null,8,["columns","rows","actions"])])])])])),_:1}),(0,l.Wm)(W,{title:"Produto",save:e.save,dialog:e.dialog,"onUpdate:dialog":t[6]||(t[6]=t=>e.dialog=t)},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",m,[(0,l.Wm)(k,{modelValue:e.form.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.name=t),class:"bg-white",outlined:"",label:"Nome",rules:[e=>e&&e.length>0]||0,"hide-bottom-space":""},null,8,["modelValue","rules"])]),(0,l._)("div",u,[(0,l.Wm)(k,{modelValue:e.form.reference,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.reference=t),class:"bg-white",outlined:"",label:"Referência/Código de Barras",rules:[e=>e&&e.length>0]||0,"hide-bottom-space":""},null,8,["modelValue","rules"])])]),(0,l._)("div",p,[(0,l._)("div",g,[(0,l.Wm)(Z,{modelValue:e.form.id_product_type,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.id_product_type=t),options:e.productTypes,"option-value":"id","option-label":"name",class:"bg-white",outlined:"",label:"Tipo","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,l._)("div",f,[(0,l.Wm)(k,{modelValue:e.form.price,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.price=t),type:"tel",class:"bg-white",outlined:"",label:"Preço (R$)",mask:"###.###.###.###,##",maxlength:"10","reverse-fill-mask":"","input-class":"text-right",rules:[e=>e&&e.length>0]||0,"hide-bottom-space":""},null,8,["modelValue","rules"])]),(0,l._)("div",w,[(0,l.Wm)(k,{modelValue:e.form.stock_amount,"onUpdate:modelValue":t[5]||(t[5]=t=>e.form.stock_amount=t),type:"tel",class:"bg-white",outlined:"",label:"Estoque (un.)",mask:"##########",maxlength:"10","reverse-fill-mask":"","input-class":"text-right",rules:[e=>e&&e.length>0]||0,"hide-bottom-space":""},null,8,["modelValue","rules"])])])])),_:1},8,["save","dialog"])],64)}a(8964),a(2809);var b=a(649),_=a(9335),q=a(1569);const y=(0,l.aZ)({name:"ProductPage",data(){return{rows:[],actions:[{label:"Editar",icon:"edit",action:e=>{this.editMode=!0,this.dialog=!0;let t=JSON.stringify(e);t=JSON.parse(t),t.price=parseFloat(t.price).toLocaleString("pt-br",{minimumFractionDigits:2}),console.log(t),this.form=t}},{label:"Remover",icon:"delete",action:e=>{this.$q.dialog({title:"Remover Produto",message:`Tem certeza que deseja remover ${e.name}?`,ok:{flat:!0,label:"Sim",color:"green"},cancel:{flat:!0,label:"Não",color:"green"},persistent:!0}).onOk((()=>{let t=this.rows.indexOf(e);q.api.get(`product/disable/${e.id}`).then((e=>{this.rows.splice(t,1)}))}))}}],dialog:!1,form:{id:0,name:"",reference:"",id_product_type:"",price:"",stock_amount:""},originalForm:"",productTypes:""}},created(){this.originalForm=JSON.stringify(this.form),this.loadData(),q.api.get("/product/type/list").then((e=>{this.productTypes=e.data.data}))},methods:{loadData(){q.api.get("/product/list/0").then((e=>{this.rows=e.data.data}))},async save(){let e=JSON.stringify(this.form);e=JSON.parse(e),e.price=e.price.replaceAll(".","").replaceAll(",",".");let t=await q.api.post("/product/store",e);return this.loadData(),t.data.ok?(this.$q.notify({type:"positive",position:"bottom",message:"Sucesso!",timeout:2e3}),this.form=JSON.parse(this.originalForm),!0):(this.$q.notify({type:"warning",position:"bottom",message:t.data.msg,timeout:2e3}),!1)}},setup(){const e=[{name:"id",required:!0,label:"Cód.",align:"center",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"name",required:!0,label:"Nome",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"reference",required:!0,label:"Referência",align:"left",field:e=>e.reference,format:e=>`${e}`,sortable:!0},{name:"name_product_type",required:!0,label:"Tipo",align:"left",field:e=>e.name_product_type,format:e=>`${e}`,sortable:!0},{name:"price",required:!0,label:"Preço",align:"right",field:e=>e.price,format:e=>{var t=parseFloat(e);return isNaN(t)?"-":`R$ ${t.toLocaleString("pt-br",{minimumFractionDigits:2})}`},sortable:!0},{name:"stock_amount",required:!0,label:"Estoque (un.)",align:"right",field:e=>e.stock_amount,format:e=>`${e}`,sortable:!0}];return{columns:e}},components:{DataTable:b.Z,FormDialog:_.Z}});var v=a(1639),k=a(9885),Z=a(8879),W=a(6611),Q=a(4581),S=a(8149),V=a(9984),C=a.n(V);const F=(0,v.Z)(y,[["render",h]]),$=F;C()(y,"components",{QPage:k.Z,QBtn:Z.Z,QInput:W.Z,QSelect:Q.Z,QField:S.Z})}}]);